
curl -k -s -u admin:$NSXPASS 'https://lm-paris/policy/api/v1/search/aggregate' -H "Content-Type: application/json" -X POST --data @payload.json

payload

{"primary":{"resource_type":"Group","filters":[{"field_names":"path","value":"\"/infra/domains/default/groups/Grupo-VM\"","case_sensitive":true}]},"related":[{"resource_type":"Rule","join_condition":"source_groups:path","alias":"SrcDfwRules"},{"resource_type":"SecurityPolicy OR GatewayPolicy","join_condition":"path:$0.parent_path","alias":"SrcDfwSections"},{"resource_type":"Rule","join_condition":"destination_groups:path","alias":"DestDfwRules"},{"resource_type":"SecurityPolicy OR GatewayPolicy","join_condition":"path:$2.parent_path","alias":"DestDfwSections"},{"resource_type":"PortMirroringInstance","join_condition":"parent_path:path","alias":"srcPortMirror"},{"resource_type":"PortMirroringInstance","join_condition":"destination_group:path","alias":"destPortMirror"},{"resource_type":"PortMirroringProfile","join_condition":"destination_group:path","alias":"destPortMirrorProfile"},{"resource_type":"GroupMonitoringProfileBindingMap","join_condition":"parent_path:path","alias":"groupMonitoringProfileBindingMap"},{"resource_type":"PortMirroringProfile","join_condition":"path:$7.port_mirroring_profile_path","alias":"srcPortMirrorProfile"},{"resource_type":"IPFIXL2Profile","join_condition":"path:$7.ipfix_l2_profile_path","alias":"AppliedToIPFIXL2Profile"},{"resource_type":"Rule","join_condition":"scope:path","alias":"DfwRuleAppliedTo"},{"resource_type":"SecurityPolicy","join_condition":"path:$10.parent_path","alias":"DfwAppliedToSections"},{"resource_type":"Group","join_condition":"expression.paths:path","alias":"ParentGroups"},{"resource_type":"SecurityPolicy","join_condition":"scope:path","alias":"SecurityPolicyAppliedToSection"},{"resource_type":"PolicyExcludeList","join_condition":"members:path","alias":"ExclusionList"},{"resource_type":"IdsRule","join_condition":"source_groups:path","alias":"SrcIdsRules"},{"resource_type":"IdsRule","join_condition":"destination_groups:path","alias":"DestIdsRules"},{"resource_type":"IdsSecurityPolicy","join_condition":"path:$15.parent_path","alias":"SrcIdsSections"},{"resource_type":"IdsSecurityPolicy","join_condition":"path:$16.parent_path","alias":"DestIdsSections"},{"resource_type":"Group","join_condition":"expression.exclude.path_expression.paths:path","alias":"ParentMaliciousIPGroups"},{"resource_type":"SharedResource","join_condition":"resource_objects.resource_path:path","alias":"SharedResource"},{"resource_type":"Share","join_condition":"path:$20.parent_path","alias":"Share"},{"resource_type":"IdsGatewayPolicy","join_condition":"path:$15.parent_path","alias":"SrcIdpsGatewaySections","included_fields":"path,parent_path,display_name,id,resource_type"},{"resource_type":"IdsGatewayPolicy","join_condition":"path:$16.parent_path","alias":"DestIdpsGatewaySections","included_fields":"path,parent_path,display_name,id,resource_type"},{"resource_type":"RedirectionRule","join_condition":"source_groups:path","alias":"SrcRedirectionRules"},{"resource_type":"RedirectionPolicy","join_condition":"path:$24.parent_path","alias":"SrcRedirectionSections"},{"resource_type":"RedirectionRule","join_condition":"destination_groups:path","alias":"DestRedirectionRules"},{"resource_type":"RedirectionPolicy","join_condition":"path:$26.parent_path","alias":"DestRedirectionSections"},{"resource_type":"EndpointRule","join_condition":"groups:path","alias":"EndpointRules"},{"resource_type":"EndpointPolicy","join_condition":"path:$28.parent_path","alias":"EndpointSections"},{"resource_type":"PolicyLbPoolAccess","join_condition":"parent_path:path","alias":"poolaccess"},{"resource_type":"PolicyLbRule","join_condition":"parent_path:$30.path","alias":"lbrules"},{"resource_type":"TcpPolicyLbVirtualServer OR UdpPolicyLbVirtualServer OR HttpPolicyLbVirtualServer OR HttpsPolicyLbVirtualServer OR CustomPolicyLbVirtualServer","join_condition":"path:$25.lb_virtual_server","alias":"lbservers"},{"resource_type":"RedirectionCommunicationEntry","join_condition":"source_groups:path","alias":"srcSICommEntries"},{"resource_type":"RedirectionCommunicationMap","join_condition":"path:$33.parent_path","alias":"srcSICommMap"},{"resource_type":"PolicyServiceInstance","join_condition":"path:$34.service_instance_path","alias":"srcServiInstances"},{"resource_type":"RedirectionCommunicationEntry","join_condition":"destination_groups:path","alias":"destSICommEntries"},{"resource_type":"RedirectionCommunicationMap","join_condition":"path:$36.parent_path","alias":"destSICommMap"},{"resource_type":"PolicyServiceInstance","join_condition":"path:$37.service_instance_path","alias":"destServiInstances"},{"resource_type":"ForwardingRule","join_condition":"source_groups:path","alias":"SrcForwardingRules"},{"resource_type":"ForwardingPolicy","join_condition":"path:$39.parent_path","alias":"SrcForwardingSections"},{"resource_type":"ForwardingRule","join_condition":"destination_groups:path","alias":"DestForwardingRules"},{"resource_type":"ForwardingPolicy","join_condition":"path:$41.parent_path","alias":"DestForwardingSections"},{"resource_type":"IPFIXDFWProfile","join_condition":"path:$7.ipfix_dfw_profile_path","alias":"AppliedToIPFIXDFWProfile"},{"resource_type":"LBPool","join_condition":"member_group.group_path:path","alias":"LBPool"},{"resource_type":"RedirectionRule","join_condition":"scope:path","alias":"RedirectionRuleAppliedTo"},{"resource_type":"RedirectionPolicy","join_condition":"path:$45.parent_path","alias":"RedirectionAppliedToSections"},{"resource_type":"PolicyFirewallFloodProtectionProfileBindingMap","join_condition":"parent_path:path","alias":"PolicyFirewallFloodProtectionProfileBindingMap"},{"resource_type":"DistributedFloodProtectionProfile","join_condition":"path:$47.profile_path","alias":"DistributedFloodProtectionProfile"},{"resource_type":"DnsSecurityProfileBindingMap","join_condition":"parent_path:path","alias":"DnsSecurityProfileBindingMap"},{"resource_type":"DnsSecurityProfile","join_condition":"path:$49.profile_path","alias":"DnsSecurityProfile"},{"resource_type":"PolicyFirewallSessionTimerProfileBindingMap","join_condition":"parent_path:path","alias":"PolicyFirewallSessionTimerProfileBindingMap"},{"resource_type":"PolicyFirewallSessionTimerProfile","join_condition":"path:$51.firewall_session_timer_profile_path","alias":"PolicyFirewallSessionTimerProfile"}],"context":"projects:ALL"}
